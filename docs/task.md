# C++ Software Engineer

<aside>
ðŸ”‘ ALL THE INFORMATION IN THIS FILE IS CONFIDENTIAL AND SHOULDNâ€™T BE SHARED TO THE PUBLIC

</aside>

## Brief

You have been provided with a web-socket address of a crypto exchange that broadcasts bitcoin market data. Your task is to write a C++ program that connects to the address and saves the incoming data to the file.

## Details

Here is the web-socket address  

```
wss://fstream.binance.com/ws/btcusdt@bookTicker
```

Your task is to write a C++ program that will receive messages from the provided endpoint using N connections, merge/aggregate the incoming data, save the stream to the file, and calculate latency metrics for each connection. Your program's goal is to receive every message with the lowest possible latency.

We expect you to identify the most efficient method for fetching the data using your knowledge of computer networks and provide metrics that demonstrate the latency difference between your C++ solution and the basic Python solution [generated by GPT v4](https://i.ibb.co/TbfPFpx/chatgpt.png):

```python
import json, time
import numpy as np
from websocket import create_connection

ws = create_connection("wss://fstream.binance.com/ws/btcusdt@bookTicker")
latencies = []
count = 0

while True:
    res = ws.recv()
    data = json.loads(res)
    latency = time.time()*1000 - data['T']
    print('ID:', data['u'], 'Latency:', latency, 'ms')
    latencies.append(latency)
    count += 1
    if count % 100 == 0:
        print('p50:', np.percentile(latencies[-100:], 50), 'ms',
              'p90:', np.percentile(latencies[-100:], 90), 'ms')
```

Start with a version that works on your local computer/server, and then you can consider finding the best geographic location to reduce latency even more.

Provide your result as a github/gitlab **private** repository.

### Readability

We value clear and understandable code. It's important that your solution is easy to follow and well-documented especially for non-obvious decisions, so anyone reviewing it can quickly grasp your approach and reasoning. Visual aids like charts or diagrams are welcome if they help clarify your methods.